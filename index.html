<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Draw a Circle</title>
    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            position: relative; /* Allows absolute positioning of footer */
        }

        h1 {
            color: #4CAF50;
            margin: 5px 0; /* Reduced margin for better spacing */
        }

        p {
            margin: 5px 0; /* Reduced margin for better spacing */
            color: #555;
        }

        canvas {
            border: 4px solid #4CAF50;
            background-color: #fff;
            cursor: crosshair;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin: 10px 0; /* Margin below canvas */
            width: 100%; /* Make canvas responsive */
            max-width: 400px; /* Set max width */
            height: auto; /* Maintain aspect ratio */
        }

        #resultContainer {
            background-color: #fff; /* White background for contrast */
            border: 2px solid #4CAF50; /* Border matching canvas */
            border-radius: 10px; /* Rounded corners */
            padding: 10px; /* Added padding for spacing */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Shadow for depth */
            margin: 10px 0; /* Adjusted margin for better spacing */
            width: fit-content; /* Adjust width to fit content */
            display: inline-block; /* Align with text */
        }

        #result {
            font-size: 1.5em;
            color: #333;
            margin: 0; /* No margin for better alignment */
        }

        footer {
            position: absolute;
            bottom: 10px; /* Adjusted to provide space from the bottom */
            width: 100%;
            text-align: center;
            font-size: 0.9em;
            color: #777;
            padding: 5px 0; /* Added padding for better spacing */
            background-color: #f0f0f0; /* Match background color */
            box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1); /* Optional: adds shadow for depth */
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.5em;
            }

            #result {
                font-size: 1.2em;
            }

            p {
                font-size: 0.9em; /* Adjust paragraph font size for smaller screens */
            }
        }
    </style>
</head>
<body>
    <h1>Freehand Circle Drawing</h1>
    <p>Draw a circle with your finger, and the system will calculate how accurate your circle is!</p>
    <canvas id="drawingCanvas" width="400" height="400"></canvas>
    
    <div id="resultContainer">
        <p id="result">Circle Accuracy: 0%</p>
    </div>

    <footer>
        <p>Created and Designed by Vishal Kumar</p>
    </footer>

    <script>
        const canvas = document.getElementById('drawingCanvas');
        const ctx = canvas.getContext('2d');
        let isDrawing = false;
        let points = [];

        // Function to get coordinates (supports both mouse and touch)
        function getCoordinates(e) {
            const rect = canvas.getBoundingClientRect();
            let x, y;
            if (e.touches && e.touches[0]) {
                x = e.touches[0].clientX - rect.left;
                y = e.touches[0].clientY - rect.top;
            } else {
                x = e.clientX - rect.left;
                y = e.clientY - rect.top;
            }
            return { x, y };
        }

        // Start drawing
        function startDrawing(e) {
            isDrawing = true;
            points = []; // Clear the points array for a new drawing
            const { x, y } = getCoordinates(e);
            points.push({ x, y });
            ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear canvas
        }

        // Draw as finger or mouse moves
        function draw(e) {
            if (!isDrawing) return;
            const { x, y } = getCoordinates(e);
            points.push({ x, y }); // Add the new point to the points array

            // Draw the current line segment
            ctx.lineWidth = 2;
            ctx.strokeStyle = 'green';
            ctx.lineCap = 'round';

            ctx.beginPath();
            ctx.moveTo(points[points.length - 2].x, points[points.length - 2].y);
            ctx.lineTo(x, y);
            ctx.stroke();
        }

        // Finish drawing and calculate accuracy
        function stopDrawing() {
            if (!isDrawing) return;
            isDrawing = false;

            calculateCircleAccuracy(); // Calculate how close the shape is to a circle
        }

        // Calculate accuracy of drawn shape as a circle
        function calculateCircleAccuracy() {
            if (points.length < 2) return;

            // Calculate bounding box of drawn shape
            let minX = Math.min(...points.map(p => p.x));
            let maxX = Math.max(...points.map(p => p.x));
            let minY = Math.min(...points.map(p => p.y));
            let maxY = Math.max(...points.map(p => p.y));

            // The center of the drawn shape
            const centerX = (minX + maxX) / 2;
            const centerY = (minY + maxY) / 2;

            // Calculate average radius from center to points
            let sumOfDistances = 0;
            points.forEach(p => {
                const distance = Math.sqrt((p.x - centerX) ** 2 + (p.y - centerY) ** 2);
                sumOfDistances += distance;
            });

            const averageRadius = sumOfDistances / points.length;

            // Calculate the average deviation of the distances (how far points are from a perfect circle)
            let sumOfSquaredDifferences = 0;
            points.forEach(p => {
                const distance = Math.sqrt((p.x - centerX) ** 2 + (p.y - centerY) ** 2);
                sumOfSquaredDifferences += Math.abs(distance - averageRadius);
            });

            const averageDeviation = sumOfSquaredDifferences / points.length;

            // Normalize accuracy: Based on deviation and average radius
            const accuracy = Math.max(0, 100 - (averageDeviation / averageRadius) * 100);

            // Update the result text
            document.getElementById('result').innerText = `Circle Accuracy: ${accuracy.toFixed(2)}%`;
        }

        // Add event listeners for both touch and mouse events
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);

        canvas.addEventListener('touchstart', startDrawing, { passive: true });
        canvas.addEventListener('touchmove', draw, { passive: true });
        canvas.addEventListener('touchend', stopDrawing);
    </script>
</body>
</html>
